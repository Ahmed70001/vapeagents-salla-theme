{# Header component #}
<header class="header">
    <div class="header-main">
        <!-- Logo -->
        <div class="logo-section">
            <a href="{{ url('home') }}" class="logo" aria-label="الصفحة الرئيسية">
                {% if store.logo %}
                    <img src="{{ store.logo | asset }}" alt="{{ store.name }}" width="120" height="40" class="logo-img">
                {% else %}
                    <span class="logo-text">Vaperelax</span>
                {% endif %}
            </a>
        </div>
        
        <!-- Navigation Menu (Desktop) -->
        <nav class="main-nav" aria-label="القائمة الرئيسية">
            <ul class="nav-list">
                <li><a href="{{ url('home') }}" class="nav-link">الرئيسية</a></li>
                <li class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-toggle">المنتجات</a>
                    <ul class="dropdown-menu">
                        <li><a href="{{ url('category', {id: 'disposable-vapes'}) }}">سحبات استخدام مرة واحدة</a></li>
                        <li><a href="{{ url('category', {id: 'e-cigarettes'}) }}">شيشة إلكترونية</a></li>
                        <li><a href="{{ url('category', {id: 'flavors'}) }}">نكهات فيب</a></li>
                        <li><a href="{{ url('category', {id: 'pods'}) }}">بودات</a></li>
                        <li><a href="{{ url('category', {id: 'coils'}) }}">كويلات</a></li>
                    </ul>
                </li>
                <li><a href="{{ url('offers') }}" class="nav-link">العروض</a></li>
                <li><a href="{{ url('brands') }}" class="nav-link">العلامات التجارية</a></li>
                <li><a href="{{ url('blog') }}" class="nav-link">المدونة</a></li>
            </ul>
        </nav>
        
        <!-- Header Actions -->
        <div class="header-actions">
            <!-- Search -->
            <div class="search-container">
                <button class="search-toggle" onclick="toggleSearch()" aria-label="البحث">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </button>
                <div class="search-dropdown" id="search-dropdown">
                    <form action="{{ url('search') }}" method="GET" class="search-form">
                        <input type="text" name="q" placeholder="ابحث عن المنتجات..." class="search-input" autocomplete="off">
                        <button type="submit" class="search-submit" aria-label="بحث">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- User Account -->
            <div class="user-account">
                {% if customer %}
                    <a href="{{ url('customer.profile') }}" class="account-link" aria-label="حسابي">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </a>
                {% else %}
                    <a href="{{ url('customer.login') }}" class="account-link" aria-label="تسجيل الدخول">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </a>
                {% endif %}
            </div>
            
            <!-- Loyalty Points -->
            <button class="loyalty-btn btn btn-outline" onclick="showLoyaltyModal()">
                نقاط ولاء
            </button>
            
            <!-- Shopping Cart -->
            <div class="cart-container">
                <a href="{{ url('cart') }}" class="cart-link" aria-label="سلة التسوق">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <span class="cart-count" id="cart-count">{{ cart.items_count | default(0) }}</span>
                </a>
            </div>
            
            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="القائمة">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </div>
    
    <!-- Mobile Navigation -->
    <nav class="mobile-nav" id="mobile-nav" aria-label="القائمة المحمولة">
        <ul class="mobile-nav-list">
            <li><a href="{{ url('home') }}" class="mobile-nav-link">الرئيسية</a></li>
            <li>
                <button class="mobile-dropdown-toggle" onclick="toggleMobileDropdown(this)">
                    المنتجات
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6,9 12,15 18,9"></polyline>
                    </svg>
                </button>
                <ul class="mobile-dropdown">
                    <li><a href="{{ url('category', {id: 'disposable-vapes'}) }}">سحبات استخدام مرة واحدة</a></li>
                    <li><a href="{{ url('category', {id: 'e-cigarettes'}) }}">شيشة إلكترونية</a></li>
                    <li><a href="{{ url('category', {id: 'flavors'}) }}">نكهات فيب</a></li>
                    <li><a href="{{ url('category', {id: 'pods'}) }}">بودات</a></li>
                    <li><a href="{{ url('category', {id: 'coils'}) }}">كويلات</a></li>
                </ul>
            </li>
            <li><a href="{{ url('offers') }}" class="mobile-nav-link">العروض</a></li>
            <li><a href="{{ url('brands') }}" class="mobile-nav-link">العلامات التجارية</a></li>
            <li><a href="{{ url('blog') }}" class="mobile-nav-link">المدونة</a></li>
        </ul>
    </nav>
</header>

<style>
.header {
    background: #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
}

.header-main {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

.logo-img {
    height: 40px;
    width: auto;
}

.logo-text {
    font-size: 1.8rem;
    font-weight: bold;
    color: #333;
    text-decoration: none;
}

/* Navigation */
.main-nav {
    display: none;
}

.nav-list {
    display: flex;
    list-style: none;
    gap: 2rem;
    margin: 0;
    padding: 0;
}

.nav-link {
    color: #333;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
    position: relative;
}

.nav-link:hover {
    color: #ff6b6b;
}

.nav-dropdown {
    position: relative;
}

.dropdown-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    border-radius: 4px;
    padding: 0.5rem 0;
    min-width: 200px;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    list-style: none;
}

.nav-dropdown:hover .dropdown-menu {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.dropdown-menu li {
    margin: 0;
}

.dropdown-menu a {
    display: block;
    padding: 0.5rem 1rem;
    color: #333;
    text-decoration: none;
    transition: background-color 0.3s ease;
}

.dropdown-menu a:hover {
    background-color: #f8f9fa;
    color: #ff6b6b;
}

/* Header Actions */
.header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.search-container {
    position: relative;
}

.search-toggle {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    color: #333;
    transition: color 0.3s ease;
}

.search-toggle:hover {
    color: #ff6b6b;
}

.search-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    border-radius: 4px;
    padding: 1rem;
    min-width: 300px;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s ease;
}

.search-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.search-form {
    display: flex;
    gap: 0.5rem;
}

.search-input {
    flex: 1;
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

.search-submit {
    background: #ff6b6b;
    color: white;
    border: none;
    padding: 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.search-submit:hover {
    background: #ff5252;
}

.account-link {
    color: #333;
    transition: color 0.3s ease;
    padding: 0.5rem;
}

.account-link:hover {
    color: #ff6b6b;
}

.loyalty-btn {
    background: transparent;
    border: 1px solid #ff6b6b;
    color: #ff6b6b;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
}

.loyalty-btn:hover {
    background: #ff6b6b;
    color: white;
}

.cart-container {
    position: relative;
}

.cart-link {
    color: #333;
    position: relative;
    padding: 0.5rem;
    transition: color 0.3s ease;
}

.cart-link:hover {
    color: #ff6b6b;
}

.cart-count {
    position: absolute;
    top: 0;
    right: 0;
    background: #ff6b6b;
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    transform: translate(50%, -50%);
}

/* Mobile Menu */
.mobile-menu-toggle {
    display: flex;
    flex-direction: column;
    gap: 3px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
}

.hamburger-line {
    width: 20px;
    height: 2px;
    background: #333;
    transition: all 0.3s ease;
}

.mobile-nav {
    display: none;
    background: white;
    border-top: 1px solid #eee;
    padding: 1rem 0;
}

.mobile-nav.active {
    display: block;
}

.mobile-nav-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.mobile-nav-link {
    display: block;
    padding: 0.75rem 2rem;
    color: #333;
    text-decoration: none;
    border-bottom: 1px solid #f8f9fa;
    transition: background-color 0.3s ease;
}

.mobile-nav-link:hover {
    background-color: #f8f9fa;
    color: #ff6b6b;
}

.mobile-dropdown-toggle {
    width: 100%;
    text-align: right;
    background: none;
    border: none;
    padding: 0.75rem 2rem;
    color: #333;
    border-bottom: 1px solid #f8f9fa;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background-color 0.3s ease;
}

.mobile-dropdown-toggle:hover {
    background-color: #f8f9fa;
}

.mobile-dropdown {
    list-style: none;
    margin: 0;
    padding: 0;
    background: #f8f9fa;
    display: none;
}

.mobile-dropdown.active {
    display: block;
}

.mobile-dropdown a {
    display: block;
    padding: 0.5rem 3rem;
    color: #666;
    text-decoration: none;
    font-size: 14px;
    transition: background-color 0.3s ease;
}

.mobile-dropdown a:hover {
    background-color: #e9ecef;
    color: #ff6b6b;
}

/* Desktop Navigation */
@media (min-width: 769px) {
    .main-nav {
        display: block;
    }
    
    .mobile-menu-toggle {
        display: none;
    }
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .header-main {
        padding: 1rem;
    }
    
    .main-nav {
        display: none;
    }
    
    .header-actions {
        gap: 0.5rem;
    }
    
    .loyalty-btn {
        display: none;
    }
    
    .search-dropdown {
        min-width: 250px;
        right: -100px;
    }
}
</style>

<script>
function toggleSearch() {
    const dropdown = document.getElementById('search-dropdown');
    dropdown.classList.toggle('active');
}

function toggleMobileMenu() {
    const mobileNav = document.getElementById('mobile-nav');
    mobileNav.classList.toggle('active');
}

function toggleMobileDropdown(button) {
    const dropdown = button.nextElementSibling;
    dropdown.classList.toggle('active');
    
    const icon = button.querySelector('svg');
    icon.style.transform = dropdown.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
}

function showLoyaltyModal() {
    // Placeholder for loyalty modal functionality
    alert('نقاط الولاء - سيتم تطوير هذه الميزة قريباً');
}

// Close search dropdown when clicking outside
document.addEventListener('click', function(event) {
    const searchContainer = document.querySelector('.search-container');
    const searchDropdown = document.getElementById('search-dropdown');
    
    if (!searchContainer.contains(event.target)) {
        searchDropdown.classList.remove('active');
    }
});

// Close mobile menu when clicking outside
document.addEventListener('click', function(event) {
    const header = document.querySelector('.header');
    const mobileNav = document.getElementById('mobile-nav');
    
    if (!header.contains(event.target) && mobileNav.classList.contains('active')) {
        mobileNav.classList.remove('active');
    }
});
</script>

